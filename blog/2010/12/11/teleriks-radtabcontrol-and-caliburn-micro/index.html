
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Telerik's RadTabControl and Caliburn.Micro - valeriu caraulean</title>
	<meta name="author" content="Valeriu Caraulean">

	
	<meta name="description" content="Telerik's RadTabControl and Caliburn.Micro NOTE: A more complete solution is available in this blog post. It contains code, examples and a NuGet &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="valeriu caraulean" type="application/atom+xml">
	
	<link rel="canonical" href="http://caraulean.com/blog/2010/12/11/teleriks-radtabcontrol-and-caliburn-micro/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><!-- Don't want the pic in header

<div class="profilepic">
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
</div>

-->

<hgroup>
  <h1>
    <a href="/"> valeriu caraulean</a>
  </h1>
</hgroup>

<p class="subtitle">keep it simple, it will work...</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/vcaraulean" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/vcaraulean" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Telerik's RadTabControl and Caliburn.Micro</h1>
	<div class="entry-content" itemprop="articleBody"><p><strong>NOTE:</strong> A more complete solution is available in <a href="/blog/2011/06/05/integration-of-caliburn-micro-and-teleriks-silverlight-controls/">this blog post</a>. It contains code, examples and a NuGet package</p>

<p>Well, again a story about having a problem, searching for a solution and finally sharing it :)</p>

<p>So, this time it’s about trying to marry the RadTabControl from Telerik’s control set with Caliburn.Micro. I’m evaluating Telerik for our pilot project in Silverlight since I would like to speed up our development process in few areas. And then we’re using happily Caliburn.Micro in it’s Silverlight flavor.</p>

<p>Scenario: a RadTabControl should contain multiple individual TabItems composed in runtime and backed each by a View Model. And it should be completely ViewModel driven.</p>

<p>Let’s start with ViewModel, as a central piece of our code:</p>

<pre><code>public class MainPageViewModel : Conductor&lt;IScreen&gt;.Collection.OneActive
{
    private readonly FirstTabItemViewModel first;
    private readonly SecondTabItemViewModel second;

    public MainPageViewModel(FirstTabItemViewModel first, SecondTabItemViewModel second)
    {
        this.first = first;
        this.second = second;
    }

    protected override void OnInitialize()
    {
        base.OnInitialize();
        Items.Add(first);
        Items.Add(second);

        ActivateItem(first);
    }
}
</code></pre>

<p>Pretty straightforward.</p>

<p>Now, we have to wrap this model in a view. In better traditions of Caliburn.Micro it’s <strong>extremely succinct and simple</strong>:</p>

<pre><code>&lt;telerik:RadTabControl x:Name="Items"&gt;
    &lt;telerik:RadTabControl.ItemTemplate&gt;
        &lt;DataTemplate&gt;
            &lt;TextBlock Text="{Binding DisplayName}" /&gt;
        &lt;/DataTemplate&gt;
    &lt;/telerik:RadTabControl.ItemTemplate&gt;
&lt;/telerik:RadTabControl&gt;
</code></pre>

<p>It looks nice, but it actually doesn’t work. Yet, Caliburn.Micro is handling this way the TabControl from WPF but that of Silverlight is horribly broken (and MS isn’t in hurry to fix it). To have it work nicely with Telerik’s Silverlight RadTabControl we have to add another convention to Caliburn to hint how he should be dealing when doing bindings for RadTabControl. The code is very similar to binding conventions for WPF’s TabControl, I’ve simply adapted it to handle new case.</p>

<p>We will be adding new convention and we should do that in our override of Configure method in our Bootstrapper. The code:</p>

<pre><code>ConventionManager
    .AddElementConvention&lt;RadTabControl&gt;(RadTabControl.ItemsSourceProperty,
                                                      "ItemsSource",
                                                      "SelectionChanged")
    .ApplyBinding = (viewModelType, path, property, element, convention) =&gt;
    {
        if (!ConventionManager.SetBinding(viewModelType, path, property, element, convention))
            return false;

        var tabControl = (RadTabControl)element;
        if (tabControl.ContentTemplate == null
            &amp;&amp; tabControl.ContentTemplateSelector == null
            &amp;&amp; property.PropertyType.IsGenericType)
        {
            var itemType = property.PropertyType.GetGenericArguments().First();
            if (!itemType.IsValueType &amp;&amp; !typeof(string).IsAssignableFrom(itemType))
                tabControl.ContentTemplate = ConventionManager.DefaultItemTemplate;
        }
        ConventionManager.ConfigureSelectedItem(element,
                                                RadTabControl.SelectedItemProperty,
                                                viewModelType,
                                                path);

        if (string.IsNullOrEmpty(tabControl.DisplayMemberPath))
            ConventionManager.ApplyHeaderTemplate(tabControl,
                                                  RadTabControl.ItemTemplateProperty,
                                                  viewModelType);
        return true;
    };
</code></pre>

<p>And <strong>it works</strong>.</p>

<p>I’ve posted complete source code with my solution on GitHub, <a href="https://github.com/vcaraulean/BlogSamples/tree/master/RadTabControlAndCaliburn">RadTabControlAndCaliburn</a>.</p>

<p><strong>Update 14/04/2011</strong>: Updated convention code to work with latest Caliburn.Micro 1.0 RTW.</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - Valeriu Caraulean -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'caraulean';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://caraulean.com/blog/2010/12/11/teleriks-radtabcontrol-and-caliburn-micro/';
        var disqus_url = 'http://caraulean.com/blog/2010/12/11/teleriks-radtabcontrol-and-caliburn-micro/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-21974825-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
